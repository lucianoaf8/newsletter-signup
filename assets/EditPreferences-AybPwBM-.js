import{C as v}from"./CustomOptions-B4F71hKZ.js";import{_ as S,c as a,a as s,t as o,b as p,F as m,r as h,g as k,w,d as y,o as l,f,h as g,e as U}from"./index-DpPvdmkO.js";const x={name:"EditPreferences",components:{CustomOptions:v},data(){const e=["weather","exchangeRates","quoteOfTheDay","funFact","englishWithLuca","onThisDay","breathingBox","dailyChallenge"],i=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],r={};e.forEach(t=>{r[t]=!0});const c={};return i.forEach(t=>{c[t]=!0}),{email:"",city:"",country:"",sectionsList:e,daysList:i,sections:r,days:c,preferences:{interests:["","",""],language:"en"},isSubmitting:!1}},methods:{updateInterests(e){console.log("Updating interests:",e),this.preferences.interests=e},async handleSubmit(){this.isSubmitting=!0,console.log("Submitting form with:",{email:this.email,city:this.city,country:this.country,sections:this.sections,days:this.days,interests:this.preferences.interests,language:this.preferences.language});try{const e=new FormData;e.append("email",this.email),e.append("city",this.city),e.append("country",this.country),e.append("sections",JSON.stringify(this.sections)),e.append("days",JSON.stringify(this.days)),e.append("interests",this.preferences.interests.join(", ")),e.append("language",this.preferences.language),e.append("_subject","Edit Preferences Request"),e.append("_template","table"),e.append("_captcha","false");const i=await fetch("https://formsubmit.co/ajax/ae13ee8bbcd4e22acd6e07e9e275bd47",{method:"POST",body:e});if(i.ok)this.$router.push("/success-page");else{const r=await i.text();console.error("Form submission failed:",r),alert("Form submission failed. Please try again.")}}catch(e){console.error("Form submission error:",e),alert("An error occurred while submitting the form. Please try again.")}finally{this.isSubmitting=!1}}}},O={class:"edit-preferences"},P={class:"title"},C={class:"preference-card"},F={class:"preferences-grid"},D=["onUpdate:modelValue"],N={class:"label-text"},T={class:"preference-card"},V={class:"preferences-grid"},E=["onUpdate:modelValue"],L={class:"label-text"},j=["value"],B=["value"],J=["value"],q=["value"],M=["value"],R=["value"],A=["value"],H=["disabled"];function I(e,i,r,c,t,u){const b=y("CustomOptions"),_=y("router-link");return l(),a("div",O,[s("h2",P,o(e.$t("editPreferencesTitle")),1),s("form",{id:"editPreferencesForm",onSubmit:i[5]||(i[5]=k((...n)=>u.handleSubmit&&u.handleSubmit(...n),["prevent"])),class:"preferences-form"},[p(b,{email:t.email,city:t.city,country:t.country,interests:t.preferences.interests,language:t.preferences.language,"onUpdate:email":i[0]||(i[0]=n=>t.email=n),"onUpdate:city":i[1]||(i[1]=n=>t.city=n),"onUpdate:country":i[2]||(i[2]=n=>t.country=n),"onUpdate:interests":i[3]||(i[3]=n=>u.updateInterests(n)),"onUpdate:language":i[4]||(i[4]=n=>t.preferences.language=n)},null,8,["email","city","country","interests","language"]),s("div",C,[s("h3",null,o(e.$t("newsletterSections")),1),s("div",F,[(l(!0),a(m,null,h(t.sectionsList,n=>(l(),a("div",{key:n,class:"preference-option"},[s("label",null,[f(s("input",{type:"checkbox","onUpdate:modelValue":d=>t.sections[n]=d,class:"neon-checkbox"},null,8,D),[[g,t.sections[n]]]),s("span",N,o(e.$t(n)),1)])]))),128))])]),s("div",T,[s("h3",null,o(e.$t("deliveryDays")),1),s("div",V,[(l(!0),a(m,null,h(t.daysList,n=>(l(),a("div",{key:n,class:"preference-option"},[s("label",null,[f(s("input",{type:"checkbox","onUpdate:modelValue":d=>t.days[n]=d,class:"neon-checkbox"},null,8,E),[[g,t.days[n]]]),s("span",L,o(e.$t(n)),1)])]))),128))])]),s("input",{type:"hidden",name:"sections",value:JSON.stringify(t.sections)},null,8,j),s("input",{type:"hidden",name:"days",value:JSON.stringify(t.days)},null,8,B),s("input",{type:"hidden",name:"interests",value:t.preferences.interests.join(", ")},null,8,J),s("input",{type:"hidden",name:"language",value:t.preferences.language},null,8,q),s("input",{type:"hidden",name:"email",value:t.email},null,8,M),s("input",{type:"hidden",name:"city",value:t.city},null,8,R),s("input",{type:"hidden",name:"country",value:t.country},null,8,A),s("button",{type:"submit",class:"submit-button neon-button",disabled:t.isSubmitting},o(t.isSubmitting?e.$t("submitting"):e.$t("savePreferences")),9,H)],32),p(_,{to:"/",class:"cta-button cta-home"},{default:w(()=>[U(o(e.$t("backToHome")),1)]),_:1})])}const G=S(x,[["render",I]]);export{G as default};
